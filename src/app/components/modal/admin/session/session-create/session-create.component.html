<p-dialog header="Nova Sessão" [visible]="visible" (visibleChange)="changeVisibilityModal($event)" [modal]="true" [style]="{ width: '80vw', maxWidth: '30rem' }" [draggable]="false" [resizable]="false" styleClass="overflow-hidden">
  <div class="flex flex-column justify-content-start align-items-stretch">
    <form class="flex flex-column align-items-stretch" [formGroup]="formSessionCreate" (ngSubmit)="onSubmit()">

      <div class="mt-2">
        <label for="date" class="inline-block text-gray-700 mb-2">Data<span class="text-red-600">*</span></label>
        <input formControlName="date" type="date" id="date" name="date" autocomplete="off" class="w-full p-2 border-round border-2 border-gray-300 outline-none focus:border-primary" aria-label="Campo para data">
        @if (formSessionCreateSubmitted && formSessionCreate.get('date')?.errors) {
        <small class="inline-block mt-2 text-red-500">Preencha com a data da sessão.</small>
        } @else if (formSessionCreate.get('date')?.touched && formSessionCreate.get('date')?.hasError('required')) {
        <small class="inline-block mt-2 text-red-500">Este campo é obrigatório.</small>
        }
      </div>

      <div class="mt-2">
        <label for="hour" class="inline-block text-gray-700 mb-2">Hora<span class="text-red-600">*</span></label>
        <input formControlName="hour" type="time" id="hour" name="hour" autocomplete="off" class="w-full p-2 border-round border-2 border-gray-300 outline-none focus:border-primary" aria-label="Campo para hora">
        @if (formSessionCreateSubmitted && formSessionCreate.get('hour')?.errors) {
        <small class="inline-block mt-2 text-red-500">Preencha com a hora da sessão.</small>
        } @else if (formSessionCreate.get('hour')?.touched && formSessionCreate.get('hour')?.hasError('required')) {
        <small class="inline-block mt-2 text-red-500">Este campo é obrigatório.</small>
        }
      </div>

      <div class="mt-2">
        <label for="ticketPrice" class="inline-block text-gray-700 mb-2">Preço da Reserva<span class="text-red-600">*</span></label>
        <input formControlName="ticketPrice" type="text" id="ticketPrice" name="ticketPrice" autocomplete="off" class="w-full p-2 border-round border-2 border-gray-300 outline-none focus:border-primary" placeholder="Preço da reserva" aria-label="Campo para preço da reserva">
        @if (formSessionCreateSubmitted && formSessionCreate.get('ticketPrice')?.errors) {
        <small class="inline-block mt-2 text-red-500">Preencha com o preço da reserva.</small>
        } @else if (formSessionCreate.get('ticketPrice')?.touched && formSessionCreate.get('ticketPrice')?.hasError('required')) {
        <small class="inline-block mt-2 text-red-500">Este campo é obrigatório.</small>
        }
      </div>

      <div class="mt-2">
        <label for="filmId" class="inline-block text-gray-700 mb-2">Filme<span class="text-red-600">*</span></label>
        <select formControlName="filmId" id="filmId" name="filmId" class="w-full p-2 border-round border-2 border-gray-300 outline-none focus:border-primary" aria-label="Campo para filme">
          <option value="" selected disabled>Selecione o filme</option>
          @for(film of films; track film.uuid) {
          <option [value]="film?.uuid">{{film?.title}}</option>
          }
        </select>
        @if (formSessionCreateSubmitted && formSessionCreate.get('filmId')?.errors) {
        <small class="inline-block mt-2 text-red-500">Selecione o filme da sessão.</small>
        } @else if (formSessionCreate.get('filmId')?.touched && formSessionCreate.get('filmId')?.hasError('required')) {
        <small class="inline-block mt-2 text-red-500">Este campo é obrigatório.</small>
        }
      </div>

      <div class="mt-2">
        <label for="roomId" class="inline-block text-gray-700 mb-2">Sala de Cinema<span class="text-red-600">*</span></label>
        <select formControlName="roomId" id="roomId" name="roomId" class="w-full p-2 border-round border-2 border-gray-300 outline-none focus:border-primary" aria-label="Campo para sala de cinema">
          <option value="" selected disabled>Selecione a sala de cinema</option>
          @for(room of rooms; track room.uuid) {
          <option [value]="room?.uuid">{{room?.number}}</option>
          }
        </select>
        @if (formSessionCreateSubmitted && formSessionCreate.get('roomId')?.errors) {
        <small class="inline-block mt-2 text-red-500">Selecione a sala de cinema.</small>
        } @else if (formSessionCreate.get('roomId')?.touched && formSessionCreate.get('roomId')?.hasError('required')) {
        <small class="inline-block mt-2 text-red-500">Este campo é obrigatório.</small>
        }
      </div>

      <button pButton label="Cadastrar" class="mt-3 uppercase"></button>
    </form>
  </div>
</p-dialog>